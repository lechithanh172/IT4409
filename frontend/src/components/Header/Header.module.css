/* --- Base Header Styles --- */
.header {
  background-color: #ffffff;
  padding: 10px 0; /* Giảm padding một chút */
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.08);
  position: sticky;
  top: 0;
  z-index: 1000; /* Đảm bảo header luôn ở trên */
  transition: box-shadow 0.3s ease;
}

.header:hover {
  /* box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1); */ /* Option: tăng shadow khi hover */
}

.container {
  max-width: 1300px; /* Tăng max-width */
  margin: 0 auto;
  padding: 0 20px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 20px; /* Khoảng cách giữa logo, nav, actions */
}

.logo {
  display: flex;
}

.logo p {
  font-size: 1.8rem; /* Tăng kích thước logo */
  font-weight: 700; /* Đậm hơn */
  color: #2c3e50; /* Màu tối hơn */
  text-decoration: none;
  flex-shrink: 0; /* Không co lại */
  margin: 5px;
  margin-top: 4px;
}

.logoShop {
  width: 3rem;
  height: auto;
}

/* --- Desktop Navigation --- */
.desktopNav {
  display: flex;
  align-items: center;
  gap: 5px; /* Giảm gap để các nút gần nhau hơn */
}

.navLink {
  color: #34495e; /* Màu text nav */
  padding: 10px 15px; /* Tăng padding */
  border-radius: 6px; /* Bo góc nhẹ */
  text-decoration: none;
  font-weight: 500; /* Medium weight */
  transition: background-color 0.2s ease, color 0.2s ease;
  display: flex; /* Để căn chỉnh icon */
  align-items: center;
  gap: 5px;
  background: none; /* Xóa background mặc định của button */
  border: none; /* Xóa border mặc định của button */
  cursor: pointer;
  font-size: 1rem; /* Đảm bảo font size như link */
  font-family: inherit; /* Kế thừa font */
}

.navLink:hover,
.dropdownToggle:hover {
  background-color: #f4f6f8; /* Màu nền khi hover */
  color: #007bff; /* Màu chữ khi hover */
}

.navLink.active {
  background-color: #eaf2ff; /* Màu nền cho link active */
  color: #0056b3; /* Màu chữ đậm hơn cho active */
  font-weight: 600; /* Đậm hơn khi active */
}

/* --- Dropdown Styles --- */
.dropdownContainer {
  position: relative;
}

.dropdownToggle {
  /* Kế thừa style từ navLink */
}

.chevronIcon {
  transition: transform 0.2s ease;
  font-size: 0.8em; /* Nhỏ hơn text */
  margin-left: 3px;
}

.userChevron {
  font-size: 1em; /* Kích thước bình thường cho user menu */
  margin-left: 5px;
}

.chevronOpen {
  transform: rotate(180deg);
}

.dropdownMenu {
  position: absolute;
  top: calc(100% + 8px); /* Khoảng cách với nút trigger */
  left: 0;
  background-color: #fff;
  border-radius: 8px;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.15);
  padding: 8px 0; /* Padding trên dưới cho menu */
  min-width: 200px; /* Độ rộng tối thiểu */
  z-index: 1001; /* Cao hơn header */
  opacity: 0;
  visibility: hidden;
  transform: translateY(10px);
  transition: opacity 0.2s ease, visibility 0.2s ease, transform 0.2s ease;
  overflow: hidden; /* Giấu các phần tử con tràn ra */
}

.dropdownContainer:focus-within .dropdownMenu, /* Hỗ trợ focus */
  .dropdownContainer:hover .dropdownMenu, /* Option: Hiện khi hover (cần JS để ổn định hơn) */
  .dropdownMenu /* Class này sẽ được quản lý bởi state is...Open */ {
  /* State mở sẽ được quản lý bằng JS, không nên dựa hoàn toàn vào hover/focus */
}

/* Selector state mở bằng JS */
.dropdownContainer > button + .dropdownMenu {
  /* Style khi dropdown mở (JS sẽ toggle class hoặc trực tiếp style) */
  /* Ví dụ nếu JS thêm class 'open' vào .dropdownMenu */
  /* &.open {
          opacity: 1;
          visibility: visible;
          transform: translateY(0);
      } */
  /* Hoặc style trực tiếp khi state là true */
  opacity: 1;
  visibility: visible;
  transform: translateY(0);
  max-height: 50vh;
  overflow-y: auto; /* Scroll nếu nội dung dài */
}

.dropdownItem {
  display: flex; /* Để căn icon và text */
  align-items: center;
  gap: 10px; /* Khoảng cách icon và text */
  padding: 10px 18px; /* Padding cho item */
  color: #34495e;
  text-decoration: none;
  font-size: 0.95rem;
  white-space: nowrap; /* Không xuống dòng */
  transition: background-color 0.2s ease, color 0.2s ease;
  background: none;
  border: none;
  width: 80%;
  text-align: left;
  cursor: pointer;
}

.dropdownItem:hover {
  background-color: #f4f6f8;
  color: #0056b3;
}

.categoryEmoji {
  font-size: 1.1em;
  margin-right: 5px; /* Khoảng cách nhẹ với text */
}

/* User Dropdown Specific */
.userDropdown {
  left: auto; /* Reset left */
  right: 0; /* Căn phải */
  min-width: 220px; /* Rộng hơn chút */
}

.dropdownHeader {
  padding: 10px 18px;
  font-weight: 600;
  color: #555;
  font-size: 0.9rem;
  border-bottom: 1px solid #eee;
  margin-bottom: 5px;
}

.dropdownIcon {
  font-size: 1.1em;
  color: #555; /* Màu icon mặc định */
  transition: color 0.2s ease;
}
.dropdownItem:hover .dropdownIcon {
  color: #0056b3; /* Đổi màu icon khi hover item */
}

.logoutButton {
  color: #e74c3c; /* Màu đỏ cho logout */
}
.logoutButton:hover {
  background-color: #fdf2f2;
  color: #c0392b;
}
.logoutButton:hover .dropdownIcon {
  color: #c0392b;
}

/* --- Actions Area --- */
.actions {
  display: flex;
  align-items: center;
  gap: 10px; /* Khoảng cách giữa các nút action */
  flex-shrink: 0; /* Không co lại */
}

/* --- Search Bar --- */
.searchBar {
  display: flex;
  align-items: center;
  background-color: #f4f6f8;
  border-radius: 20px; /* Bo tròn nhiều hơn */
  padding: 0px 5px 0px 15px; /* Padding bên trong */
  transition: background-color 0.2s ease, box-shadow 0.2s ease;
  /* Option: Ẩn trên mobile nhỏ */
}

.searchBar:focus-within {
  background-color: #ffffff;
  box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.25); /* Viền xanh khi focus */
}

.searchInput {
  border: none;
  outline: none;
  background: none;
  padding: 8px 0; /* Padding input */
  font-size: 0.9rem;
  width: 180px; /* Độ rộng mặc định */
  transition: width 0.3s ease;
}
.searchInput:focus {
  /* width: 250px; */ /* Option: Mở rộng khi focus */
}
.searchInput::placeholder {
  color: #888;
}

.searchButton {
  background: none;
  border: none;
  color: #555;
  padding: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  border-radius: 50%;
  transition: background-color 0.2s ease, color 0.2s ease;
}
.searchButton:hover {
  background-color: #e0e0e0;
  color: #333;
}

/* --- Action Buttons (Cart, User) --- */
.actionButton {
  position: relative; /* Cho cart count */
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 10px; /* Kích thước nút vuông */
  background: none;
  border: none;
  border-radius: 50%; /* Nút tròn */
  color: #34495e;
  cursor: pointer;
  transition: background-color 0.2s ease, color 0.2s ease;
  font-size: 1.3rem; /* Kích thước icon */
}
.actionButton:hover {
  background-color: #f4f6f8;
  color: #007bff;
}
/* User button có thể có thêm style riêng */
.userButton {
  gap: 5px; /* Khoảng cách giữa icon và chevron */
}
.userNameDesktop {
  /* Ẩn tên trên mobile, hiện trên desktop nếu cần */
  font-size: 0.9rem;
  font-weight: 500;
  margin-left: 5px;
  display: none; /* Mặc định ẩn */
}
@media (min-width: 1200px) {
  .userNameDesktop {
    /* display: inline; */ /* Hiện trên màn hình lớn */
  }
}

.cartCount {
  position: absolute;
  top: -2px;
  right: -4px;
  background-color: #e74c3c; /* Màu đỏ nổi bật */
  color: white;
  border-radius: 40px;
  padding: 2px 5px; /* Điều chỉnh padding */
  font-size: 0.7rem; /* Cỡ chữ nhỏ */
  font-weight: bold;
  min-width: 16px;
  text-align: center;
  line-height: 1;
  border: 1px solid white; /* Viền trắng nhỏ */
}

/* --- Auth Buttons (Desktop) --- */
.desktopAuth {
  display: flex;
  align-items: center;
  gap: 8px;
}
.authButton {
  padding: 6px 12px !important; /* Ghi đè padding của Button component nếu cần */
  font-size: 0.9rem !important;
}

/* --- Mobile Menu Toggle --- */
.mobileMenuToggle {
  display: none; /* Ẩn mặc định */
  background: none;
  border: none;
  font-size: 1.8rem; /* Kích thước icon hamburger/X */
  color: #34495e;
  cursor: pointer;
  padding: 5px;
}

/* --- Mobile Menu Drawer --- */
.mobileMenu {
  position: fixed;
  top: 0;
  right: -100%; /* Bắt đầu ẩn bên phải */
  width: 300px; /* Độ rộng menu */
  max-width: 85%; /* Giới hạn độ rộng tối đa */
  height: 100vh;
  background-color: #ffffff;
  box-shadow: -3px 0 15px rgba(0, 0, 0, 0.1);
  z-index: 1100; /* Cao hơn cả overlay */
  transition: right 0.3s ease-in-out;
  overflow-y: auto; /* Scroll nếu nội dung dài */
  display: flex;
  flex-direction: column;
}

.mobileMenuOpen {
  right: 0; /* Hiện ra khi mở */
}

.mobileMenuHeader {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 15px 20px;
  border-bottom: 1px solid #eee;
  flex-shrink: 0; /* Không co lại */
}
.mobileMenuTitle {
  font-size: 1.2rem;
  font-weight: 600;
  color: #2c3e50;
}
.closeButton {
  background: none;
  border: none;
  font-size: 1.6rem;
  color: #555;
  cursor: pointer;
  padding: 5px;
}

.mobileUserInfo {
  padding: 20px;
  border-bottom: 1px solid #eee;
  flex-shrink: 0;
}
.mobileWelcome {
  display: flex;
  align-items: center;
  gap: 10px;
  font-weight: 600;
  margin-bottom: 15px;
  color: #333;
}
.mobileUserIcon {
  font-size: 1.4rem;
  color: #007bff;
}
.mobileAuthButtons {
  display: flex;
  flex-direction: column;
  gap: 10px;
}
.mobileAuthBtn {
  width: 100%; /* Nút chiếm cả chiều rộng */
}

.mobileNavLink {
  display: block;
  padding: 12px 20px;
  color: #34495e;
  text-decoration: none;
  font-size: 1rem;
  transition: background-color 0.2s ease, color 0.2s ease;
  border: none; /* Reset style button nếu dùng button */
  background: none; /* Reset style button nếu dùng button */
  width: 100%; /* Cho button */
  text-align: left; /* Cho button */
  cursor: pointer; /* Cho button */
  font-family: inherit;
}

.mobileNavLink:hover {
  background-color: #f4f6f8;
  color: #007bff;
}

.mobileNavGroupTitle {
  padding: 10px 20px 5px 20px;
  font-size: 0.85rem;
  font-weight: 600;
  color: #777;
  text-transform: uppercase;
  margin-top: 10px;
}

.mobileCategorySection .mobileNavLink {
  padding-left: 30px; /* Thụt lề cho danh mục con */
}

.mobileMenuDivider {
  border: none;
  border-top: 1px solid #eee;
  margin: 10px 0;
}

.mobileLogoutButton {
  color: #e74c3c;
}
.mobileLogoutButton:hover {
  background-color: #fdf2f2;
  color: #c0392b;
}

/* --- Overlay for Mobile Menu --- */
.overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.4); /* Màu đen mờ */
  z-index: 1050; /* Dưới mobile menu nhưng trên nội dung */
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.3s ease, visibility 0.3s ease;
}
/* Hiện overlay khi mobile menu mở */
.mobileMenuOpen + .overlay {
  opacity: 1;
  visibility: visible;
}

/* --- Responsive --- */
@media (max-width: 1024px) {
  .desktopNav {
    display: none; /* Ẩn nav desktop */
  }
  .desktopAuth {
    display: none; /* Ẩn auth desktop */
  }
  .mobileMenuToggle {
    display: block; /* Hiện nút mobile menu */
  }
  .searchBar {
    /* Option: thu gọn search bar */
    /* padding: 0 5px; */
  }
  .searchInput {
    /* width: 150px; */ /* Giảm độ rộng input */
    /* Option: Ẩn hoàn toàn chỉ hiện icon */
    /* width: 0;
           padding: 8px 0;
           opacity: 0;
           pointer-events: none; */
  }
  /* .searchBar:focus-within .searchInput {
           width: 150px;
           opacity: 1;
           pointer-events: auto;
       } */
}

@media (max-width: 768px) {
  .container {
    padding: 0 15px;
    gap: 15px;
  }
  .logo {
    font-size: 1.6rem;
  }
  .searchBar {
    /* Có thể ẩn hẳn nếu cần thêm không gian */
    /* display: none; */
    /* Hoặc chỉ còn icon */
    background: none;
    padding: 0;
  }
  .searchInput {
    display: none; /* Ẩn input hẳn */
  }
  .searchButton {
    padding: 10px; /* Giữ lại nút search như action button */
    border-radius: 50%;
    font-size: 1.3rem;
    color: #34495e;
  }
  .searchButton:hover {
    background-color: #f4f6f8;
    color: #007bff;
  }

  .actionButton {
    font-size: 1.2rem; /* Giảm nhẹ icon size */
    padding: 8px;
  }
  .cartCount {
    font-size: 0.65rem;
    min-width: 14px;
    padding: 1px 4px;
  }
}

@media (max-width: 480px) {
  .container {
    padding: 0 10px;
    gap: 10px;
  }
  .logo {
    font-size: 1.4rem;
  }
  .actions {
    gap: 5px; /* Giảm gap action buttons */
  }
  .actionButton {
    padding: 7px;
  }
  /* Có thể ẩn luôn nút search nếu quá chật */
  /* .searchButton { display: none; } */
}
